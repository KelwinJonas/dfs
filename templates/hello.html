<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body>
    <div class="container">
        <form class="row justify-contnet-center" x-data="handler()" method='post' action="/enviar">
            <div class="col-sm-2"
                style="margin-top:50px; position: fixed; right: 2%; padding-left: 0px;">
                <div class="float-right">
                    <button @click="adicionaAutor" id="addCoautor" type="button" class="btn btn-primary btn-padding border mb-2"
                        style="text-decoration: none; border-radius: 14px; background-color: #E5B300"
                        title="Clique aqui para adicionar coautor(es), se houver">
                        <img id="icone-add-coautor" class="mt-2" src="/static/user-plus-solid.svg"
                                alt="Ã­cone de adicionar coautor(es)" width="30px">
                        <br> Adicionar coautor(es)
                    </button>
                </div>
            </div>
            <div class="col-md-12 mx-auto">
                <template x-for="(autor, index) in autores" :key="index">
                    <div class="row">
                        <template x-if="index == 1">
                            <h4 class="col-sm-12" id="title-coautores"
                                style="margin-top:20px">
                                Coautor(es)
                            </h4>
                        </template>
                        <div class="item card w-100">
                            <div class="row card-body">
                                <div :class="index == 0 ? 'col-md-6' : 'col-md-4 col-lg-4'">
                                    <label :for="'email' + index">E-mail</label>
                                    <input type="text" style="margin-bottom:10px"
                                        class="form-control emailCoautor"
                                        name="emailCoautor[]" placeholder="E-mail"
                                        :id="'email' + index"
                                        x-on:focusout="checarNome(index)"
                                        x-model="autor.email">
                                </div>
                                <div :class="index == 0 ? 'col-md-6' : 'col-md-4 col-lg-5'">
                                    <label :for="'nome' + index">Nome Completo</label>
                                    <input type="text" style="margin-bottom:10px"
                                        class="form-control emailCoautor"
                                        name="nomeCoautor[]" placeholder="Nome"
                                        :id="'nome' + index"
                                        x-model="autor.nome">
                                </div>
                                <template x-if="index > 0">
                                    <div class="col-md-4 col-lg-3 justify-content-center d-flex align-items-end btn-group pb-1">
                                        <button type="button" @click="removeAutor(index)" style="color: #d30909;" class="btn"><i class="fas fa-user-times fa-2x"></i></button>
                                        <button type="button" @click="sobeAutor(index)" class="btn btn-link"><i class="fas fa-arrow-up fa-2x"></i></button>
                                        <button type="button" @click="desceAutor(index)" class="btn btn-link"><i class="fas fa-arrow-down fa-2x"></i></button>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
            <button class="btn btn-primary" type="submit">
                Enviar
            </button>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
    <script>
        function handler() {
            inicial = [{
                nome: '',
                email: ''
            }];
            inicial.push();
            return {
                autores: inicial,
                adicionaAutor() {
                    this.autores.push({
                        nome: '',
                        email: ''
                    });
                },
                removeAutor(index) {
                    this.autores.splice(index, 1);
                },
                sobeAutor(index) {
                    if (index > 1) {
                        temp = this.autores[index - 1]
                        this.autores[index - 1] = this.autores[index]
                        this.autores[index] = temp
                    }
                },
                desceAutor(index) {
                    if (index > 0 && (index + 1) < this.autores.length) {
                        temp = this.autores[index + 1]
                        this.autores[index + 1] = this.autores[index]
                        this.autores[index] = temp
                    }
                }
            }
        }
    </script>
</body>
</html>